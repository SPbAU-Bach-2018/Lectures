
\setdefaultlanguage[spelling=modern,babelshorthands=true]{russian}
\setotherlanguage{english}

\defaultfontfeatures{Ligatures={TeX}}
\setmainfont{CMU Serif}
\setsansfont{CMU Sans Serif}
\setmonofont{CMU Typewriter Text}  
\setmathfont{Latin Modern Math}
\newcommand{\Setminus}{\mathbin{\backslash}}

\DeclareSymbolFont{cyrletters}{\encodingdefault}{\familydefault}{m}{it}
\newcommand{\makecyrmathletter}[1]{%
  \begingroup\lccode`a=#1\lowercase{\endgroup
  \Umathcode`a}="0 \csname symcyrletters\endcsname\space #1
}
\count255="409
\loop\ifnum\count255<"44F
  \advance\count255 by 1
  \makecyrmathletter{\count255}
\repeat
%% Simpy adds cyrillic to maths!

\frenchspacing

\def\la{\leftarrow}
\def\ra{\rightarrow}
\def\lra{\leftrightarrow}
\def\La{\Leftarrow}
\def\Ra{\Rightarrow}
\def\Lra{\Leftrightarrow}
\def\lrh{\leftrightharpoons}
\def\btu{\bigtriangleup}

\def\N{\mathbb{N}}
\def\Z{\mathbb{Z}}
\def\Q{\mathbb{Q}}
\def\R{\mathbb{R}}
\def\C{\mathbb{C}}
\def\d{\mathup{d}}

\def\LraDef{\stackrel{\mathrm{Def}}{\Lra}}
\def\eqDef{\stackrel{\mathrm{Def}}{=}}

\renewcommand{\le}{\leqslant}
\renewcommand{\ge}{\geqslant}
\renewcommand{\leq}{\leqslant}
\renewcommand{\geq}{\geqslant}

\DeclareMathOperator{\Int}{int}
\DeclareMathOperator{\cl}{cl}
\DeclareMathOperator{\diam}{diam}
\DeclareMathOperator{\Dom}{Dom}
\DeclareMathOperator{\coDom}{coDom}
\DeclareMathOperator{\Char}{char}
\DeclareMathOperator{\Arg}{Arg}
\AtBeginDocument{\let\Re\relax}
\AtBeginDocument{\newcommand{\Re}{\mathop{\mathrm{Re}}\nolimits}}
\AtBeginDocument{\let\Im\relax}
\AtBeginDocument{\newcommand{\Im}{\mathop{\mathrm{Im}}\nolimits}}
\newcommand{\emod}[1]{\mathop{\equiv}\limits_{#1}}
\newcommand{\Choose}[2]{{\left(#1 \atop #2\right)}}

\renewcommand{\thechapter}{\Roman{chapter}}
\renewcommand{\thesection}{\thechapter.\arabic{section}}

\newcounter{theorem}[section]
\renewcommand{\thetheorem}{\thesection.\arabic{theorem}}
\newcommand*{\theoremheader}[1]{%
	\par\refstepcounter{theorem}%
	\textbf{Теорема \thetheorem.\ifthenelse{\equal{#1}{}}{}{ #1.}}%
}
\newenvironment*{theorem}[1]{
	\theoremheader{#1}%
}{%
	\par%
}

\newcounter{conseq}[theorem]
\renewcommand{\theconseq}{\arabic{conseq}}
\newcommand*{\conseqheader}{%
	\par\refstepcounter{conseq}%
	\textit{Следствие \theconseq.}%
}
\newcommand*{\conseqheaderstar}{%
	\par%
	\textit{Следствие.}%
}
\newenvironment*{conseq}{%
	\conseqheader%
}{%
	\par%
}
\newenvironment*{conseq*}{%
	\conseqheaderstar%
}{%
	\par%
}

\newenvironment{assertion}{%
	\par%
	\textbf{Утверждение.}%
}{%
	\par%
}

\newenvironment{proof}{%
	\par%
	$\blacktriangleright$%
}{%
	\hfill$\blacktriangleleft$%
	\par%
}

\newenvironment{Def}{%
	\par%
	$\mathfrak{Def\colon}$%
}{%
	\par%
}

\newenvironment{Rem}{%
	\par%
	\textit{REM:}%
}{%
	\par%
}

\newenvironment{exmp}{%
	\par%
	\textbf{Пример:}%
}{%
	\par%
}

\setcounter{MaxMatrixCols}{40}

\AtBeginDocument{\newcommand{\BigHeader}[3]{%
	\begin{center}
	\textbf{\huge #1} \\
	\textbf{\Large #2} \\
	\vspace{0.5em}
	\textbf{\large #3} \\
	\vspace{0.5em}
	{Собрано: \today~\currenttime} \\
	\end{center}
}}
