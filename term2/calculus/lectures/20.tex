\begin{theorem}
	$K$ "--- компакт, $f\colon K \ra \R$ "--- непрерывная функция.
	Её график имеет меру ноль.
\end{theorem}
\begin{proof}
	$f$ непрерывна на компакте, значит по теоема Катнера $f$ равномерна непрерывна:
	\[ \forall \epsilon > 0, \exists \delta > 0\colon \forall x, y \in K, |x - y| < \delta \Ra |f(x) - f(y)| < \epsilon \]
	$K$ компакт, значит ограничен и содержится в ячейке.
	Будем делить по всем осям пополам до тех пор, пока диаметр ячеек не станет меньше $\delta$.
	Рассмотрим часть $Г_f$, лежащую над ячейкой $P_k$:
	\[ \{(x, f(x)) \mid x \in K \cap P_k \} \]
	Возьмём произвольные $x, y \in K \cap P_k$.
	Тогда $|x - y| \le \diam P_k < \delta$, откуда $|f(x) - f(y)| < \epsilon$.
	Зафиксируем $x_k \in K \cap P_k$.
	\[ A_k \lrh \{(x, t) | \mid x \in P_k \land t \in (f(x_k) - \epsilon, f(x_k) + \epsilon] \} \]
	Это ячейка, содержащая кусок графика.
\setauthor{Егор Суворов}
	Тогда мы можем вписать наш график в $\cup_{k \colon P_k \cap K \neq \varnothing} A_k$.
	Давайте посчитаем меру этих множеств (здесь за $\mu_n$ обозначим меру подмножества $K$, а за $\mu_{n+1}$ "--- меру подмножества пространства, где нарисован график):
	\begin{gather*}
	  \mu_{n+1} A_k = 2\epsilon \mu_n P_k \\
	  \mu_{n+1} (\cup A_k) \le \sum \mu_{n+1} A_k \underbrace{\le}_{\text{слева сумма не по всем $k$, а справа по всем}} 2\epsilon \sum \mu_n P_k = 2\epsilon \mu P
	\end{gather*}
	Так как $P$ фиксировано, то $\mu P$ тоже фиксировано, а $\epsilon$ мы выбираем любой.
	Значит, мера графика меньше любого положительного числа, то есть ноль.
\end{proof}
\begin{conseq}
	Криволинейная трапеция  измерима.
	Напоминание: криволинейная трапеция "--- это мы для непрерывной
	функции $f\colon [a, b] \to \R$ берём все точки вида $a \le x \le b$, $0 \le y \le f(x)$.

	Более того, измеримы все множества вида
	\[ G_f = \{(x, t) \mid x \in K; 0 \le t \le f(x)\} \]
	где	$f \colon K \to \R$ ($K$ "--- компакт, измеримо, $f$ непрерывна и неотрицательна).
\end{conseq}
\begin{proof}
	Докажем, что если $K$ измеримо, то такое множество тоже измеримо.
	Надо доказать, что граница $G_f$ имеет меру ноль.
	Она состоит из следующих кусочков: график самой функции, компакт, вверхторчащие куски над границей $K$ (назовём их цилиндрами над $\partial K$).
	% картинка криволинейной трапеции
	Хотим показать, что все эти куски имеют меру ноль.
	\begin{itemize}
	\item $\partial G_f = 0$ по теореме.
	\item
		Поймём про $K$.
		Так как $K$ компакт, то оно содержится в некоторой ячейке $P \subset \R^n$.
		А что происходит в $\R^{n+1}$?
		В ней $K \subset P \times (-\epsilon, +\epsilon]$ "--- ячейка в $\R^{n+1}$.
		Устремляем $\epsilon$ к нулю, получаем, что мера ячейки стремится к нулю, то есть мера $K$ в $\R^{n+1}$ равна нулю.
	\item
		Так как $f$ непрерывна на компакте, то она ограничена: $0 \le f(x) \le M$.
		Значит, оставшиеся цилиндры содержатся в $\partial K \times [0,M]$.
		Возьмём клеточное множество $C_{\epsilon} \supset \partial K$ такое, что $\mu_n C_{\epsilon} < \epsilon$.
		Тогда $\partial K \times [0,M] \subset C_\epsilon \times (-1,M]$ "--- клеточное множество.
		\begin{gather*}
			\mu_{n+1} (C_\epsilon \times (-1, M]) = (M+1)\mu_nC_\epsilon < \epsilon(M+1)
		\end{gather*}
		То есть мера цилиндров тоже ноль.
	\end{itemize}
\end{proof}
\begin{conseq}
	Если $E$ имеет меру ноль, то ограниченный цилиндр над $E$ тоже имеет меру ноль.
\end{conseq}
\begin{proof}
	В точности как в последнем пункте предыдущего доказательства.
\end{proof}

\section{Кратный интеграл}
\begin{Def}
	Пусть есть измеримое множество $E$.
	Тогда его разбиение $\tau$ есть набор множеств $\{ E_k \}_{k=1}^{m(\tau)}$ ($m(\tau)$ "--- просто количество множеств в разбиении), где выполняются свойства:
	\begin{enumerate}
	\item $E_k$ измеримо
	\item $E_k$ дизъюнктны
	\item $E=\cup_{k=1}^{m(\tau)} E_k$.
	\end{enumerate}
\end{Def}
\begin{Def}
	Мелкость (ранг) разбиения $|\tau|$ есть наибольший диаметр множеств $E_k$.
\end{Def}
\begin{Rem}\label{riemann_measure_sum}
	\[ \mu E = \sum_{k=1}^{m(\tau)} \mu E_k \]
\end{Rem}
\begin{Def}
	Пусть $\tau$ и $\tau'$ "--- разбиения $E$.
	Мы скажем, что $\tau'$ \textit{подчинено} $\tau$ (обозначается $\tau' \succ \tau$), если
	\[
		\forall E_k' \in \tau' \colon \exists E_j \in \tau, E_k' \subset E_j
	\]
	Смысл: мы сначала разбили $E$ в $\tau$, а потом еще доразбили до $\tau'$.
\end{Def}

Несколько свойств:
\begin{enumerate}
\item Подчинимость транзитивна: если $\tau_1 \succ \tau_2$ и $\tau_2 \succ \tau_3$, то $\tau_1 \succ \tau_3$.
\item
	$\forall \tau', \tau'' \colon \exists \tau, \tau', \tau'' \succ \tau$.
	\begin{proof}
		Пусть $\tau'=\{E_k'\}$ и $\tau''=\{E_k''\}$.
		Тогда положим $\tau=\{E_k' \cap E_j''\}$.
	\end{proof}
\end{enumerate}

\begin{Def}
	Оснащение разбиения (как в определении интеграла по Риману) "--- набор точек $\xi_k \in E_k$
	(взяли в каждом множестве по точке).
\end{Def}
\begin{Def}
	Сумма Римана: есть $f\colon E \to \R$ ($E$ "--- измеримо),
	есть $\tau$ "--- разбиение $E$, $\xi$ "--- его оснащение.
	\[
		S(f, \tau, \xi) = \sum_{k=1}^{m(\tau)} f(\xi_k) \mu E_k
	\]
\end{Def}
\begin{Def}
	Интеграл Римана: есть $f \colon E \to \R$ ($E$ "--- измеримо).
	Обозначения:
	\[
		I = \int_E f = \int_E f(x) \d x = \idotsint_E f(x_1, \dots, x_n) \d x_1 \dots \d x_n
	\]
	$I$ называется интегралом Римана функции, если оно удовлетворяет следующему свойству:
	\[
		\forall \epsilon > 0 \colon \exists \delta,
		\forall \tau \text{"--- разбиение $E$ ранга $\le \delta$} \colon
		\forall \xi \text{"--- оснащение разбиения} \colon
		\colon |I-S(f,\tau,\xi)| < \epsilon
	\]
\end{Def}
\begin{Rem}
	$\idotsint$ "--- это пока для нас просто обозначение.
	Но мы будем стремиться к тому, чтобы свести кратный интеграл к нескольким последовательным.
	Возможно, успеем даже в этом семестре.
\end{Rem}
\begin{Rem}
	Если мы будет требовать от разбиения не дизъюнктность, а лишь что пересечение любых имеет меру ноль,
	то всё равно всё будет хорошо.
\end{Rem}
\begin{proof}
	В самом деле: $E = \cup E_k$ и $\Int E_k \subset E$.
	А вот $\Int E_k$ уже не пересекаются, иначе пересечение с каждой точкой содержит некоторую окрестность,
	то есть имеет ненулевую меру.
	\[
	\sum_{k=1}^{m(\tau)} \mu E_k
	\ge \mu E \ge
	\sum_{k=1}^{m(\tau)} \mu \Int E_k
	= \sum_{k=1}^{m(\tau)} \mu E_k
	\]
	То есть замечение номер \ref{riemann_measure_sum} всё еще в силе.
	В рассуждениях дальше тоже ничего не поломается: мы всего лишь добавляем какие-то граничные точки.
\end{proof}
\begin{Rem}
	Мы когда-то уже говорили про интеграл Римана на прямой.
	Тогда упоминалось, что интегрируемы будут не только непрерывные функции.
	Это всё еще правда :).
	Правда, пока еще не было конкретики на тему <<какие именно непрерывные будут интегрируемы>>.
	Ничего страшного, скоро будет.
\end{Rem}

\begin{theorem}
	\begin{enumerate}
	\item $n=1$. Если $f \colon [a,b] \to \R$ интегрируема, то $f$ ограничена.
	\item
		$n \ge 2$. Пусть $E$ существует последовательность разбиений $\tau_k$ такая, что
		$|\tau_k| \to 0$ и все множества всех разбиений имеют положительную меру.
		Тогда если $f$ интегрируема на $E$, то $f$ ограничена.
	\end{enumerate}
\end{theorem}
\begin{Rem}
	При $n \ge 2$ простой ограниченности не будет.
	Возьмём такое множество $E$ на плоскости:
	% картинка: квадратик с хвостом меры ноль налево, конец хвоста не включая
	% и координаты
	Определим $f$ как
	\[
		f(x, y) =
		\begin{cases}
			\frac 1 x, & y=0\\
			0,         & y\neq 0
		\end{cases}
	\]
	Функция неограничена, да и множество меры не ноль.
	А интеграл ноль, так как кусочки разбиения, содержащие <<хвост>>, имеют меру ноль.
	А мера кусочков разбиения, задевающих нижнюю сторону квадрата, ограничена мелкостью разбиения.
	То есть тоже стремится к нулю (а значения функции на нижней стороне квадрата ограничены).
	Значит, интеграл ноль.
	Очень. Жаль.
\end{Rem}
\begin{proof}
	Будем считать, что $n\ge 1$ и у нас есть последовательность разбиений $\tau_k$ из пункта два.
	Функция интегрируема, значит, $|I-S(f,\tau_k,\xi_k)|<1$ при достаточно больших $k$.
	Посмотрим на сумму Римана:
	\[
		S=\sum_{j=1}^{m(\tau_k)} f(\xi_j^{(k)}) \mu E_j^{(k)}
	\]
	Предположим, что $f$ неограничена.
	Значит, она неограничена на каком-то элементе разбиения $E_{j_0}^{(k)}$
	(иначе она ограничена на каждом из конечного числа элементов, то есть ограничена вообще).
	Перепишем сумму:
	\[
		S=f(\xi_{j_0}^{(k)}) \underbrace{\mu E_{j_0}^{(k)}}_{>0} + \sum_{j\neq j_0} f(\xi_j^{(k)}) \mu E_j^{(k)}
	\]
	Второе слагаемое-сумму трогать не будем, зафиксируем.
	А в первом у нас фиксирована положительая мера.
	А вот точку мы можем менять произвольно (ведь оснащение можно менять как угодно, на мелкость это не влияет,
	а у нас должно быть верно для любого оснащения разбиения).
	Так как $f$ неограничена, то мы можем сделать $f(\xi_{j_0}^{(k)}$ либо сколь угодно большим,
	либо сколь угодно маленьким.
	То есть $S$ получаем сколь угодно большим или сколь угодно маленьким, что противоречит условию на сумму Римана.

	Теперь поймём, что для невырожденного отрезка на прямой ($n=1)$ условие из второго пункта заведомо выполнено.
	Это очевидно: взяли и нарезали отрезок на кусочки.
	А в вырожденном отрезке значение всего одно, значит, $f$ ограничена.
\end{proof}
