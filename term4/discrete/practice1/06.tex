\chapter{Занятие 18.03.2016 (графы)}
\section{Разбор классной работы}

\subsection{Задача 1}
	\begin{Rem}
		Не уверен, что это решение, расказанное на занятии.
	\end{Rem}
	
	Сначала в одну сторону: пусть совершенное паросочетание существует.
	Тогда в дереве чётное число вершин.
	Также по теореме Татта при удалении произвольной вершины количество нечётных компонент
	не может быть больше единицы.
	С другой стороны, оно не может быть равно нулю, иначе в дереве получается нечётное число вершин.

	Теперь в другую: индукция по числу вершин в дереве (для деревьев чётного размера).
	База при $n=2$ очевидна.
	Теперь переход: рассмотрим какое-то дерево $T$, пусть при удалении любой вершины
	образуется ровно одна нечётная компонента.
	Так как у нас дерево, возьмём какой-нибудь его лист $x$, смежный с вершиной $y$.
	Удалим вершину $y$, у нас останется одна вершина $y$ (нечётная компонента) и сколько-то чётных компонент: $C_1, \dots, C_k$.
	Покажем, что для компоненты $C_i$ также выполняется условие задачи, тогда в каждой из них мы сможем найти
	совершенное паросочетание, добавить к нему ребро $x \to y$, получить совершенное паросочетание в $T$.

	Возьмём компоненту $C_i$ и вершину $v$ в ней.
	Мы знаем, что при удалении $v$ из $T$ образовывалась ровно одна нечётная компонента.
	Заметим, что в $C_i$ все компоненты, кроме одной (в которой содержалась $y$) остались те же.
	А та, в которой содержалась $v$, изменила свой размер на чётное число: суммарный размер
	компонент $C_1, C_2, \dots, C_{i-1}, C_{i+1}, \dots$ (чётное число) плюс две вершины ($x$ и $y$).
	В частности, эта компонента могла вообще сдуться до нуля (если $v$ была смежна с $y$).
	Однако же условие задачи как выполнялось для дерева $T$ и вершины $v$, так и продолжает выполняться
	для дерева $C_i$ и вершины $v$, что и требовалось показать.

\subsection{Задача 2}
	От противного: пусть нет совершенного паросочетания.
	Тогда по теореме Татта имеется некоторое подмножество вершин $S$ такое,
	что при его удалении остаётся $x>|S|$ компонент нечётного размера.
	Рассмотрим какую-нибудь компоненту $C$ нечётного размера.
	Заметим, что в неё из $S$ ведёт хотя бы $k-1$ ребро, так как если их ведёт меньше,
	то при их удалении из исходного графа $C$ и $S$ отделятся.

	Предположим, что $k$ нечётно.
	Тогда у нас суммарная исходящая степень вершин внутри компоненты должна быть нечётна,
	то есть рёбер, исходящих наружу компоненты, тоже должно быть нечётно.
	А так как $k-1$ чётно, то на самом деле из каждой компоненты наружу (в $S$) идёт хотя бы $k$ рёбер.
	Но суммарная степень вершин $S$ равна $k|S|$, а суммарная исходящая степень компонент
	строго больше $k|S|$, противоречие.

	Теперь предположим, что $k$ чётно.
	Аналогичная ситуация: суммарная исходящая степень вершин внутри компоненты должна быть чётна,
	а рёбер, исходящих наружу компоненты, должно быть чётно (чтобы сошлась чётность степеней внутри компоненты).
	Так как $k-1$ нечётно, то на самом деле из каждой компоненты в $S$ идёт хотя бы $k$ рёбер.
	Аналогично получем противоречие.

\subsection{Задача 3}
	У нас есть лемма Холла, воспользуемся ей.
	Докажем условие леммы от противного: пусть у нас есть множество $A$ вершин одной
	доли и соответствующее ему множество вершин $B$ второй доли, причём $|A|>|B|$.
	Тогда посчитаем суммарную степень вершин в $A$, она равна $k|A|$ (где $k$ "--- регулярность графа).
	Но все эти рёбра могут идти только в множество $B$, значит, суммарная степень вершин $B$
	хотя бы $k|A|$.
	Противоречие, так как суммарная степень вершин $B$ равна $k|B|<k|A|$.

\subsection{Задача 1.11}
	Нарисуем кактус.
	Давайте его преобразуем (сохранив число рёбер и вершин) в кактус, в котором
	все циклы имеют длину ровно три.
	Берём цикл большей длины, какую-то вершину в нём, и одно ребро цикла из неё
	перенаправляем напрямую в его соседа, уменьшая тем самым длину цикла:
	\begin{center}
		\begin{tabular}{cc}
		До & После \\
		\includegraphics{06_p1_11_a.pdf} & \includegraphics{06_p1_11_b.pdf} \\
		\end{tabular}
	\end{center}

	Теперь давайте будем стягивать циклы (которые теперь треугольники) в вершину.
	За одно стягивание мы убиваем две вершины и три ребра (которые были между вершинами треугольника).
	Пусть после $t$ стягиваний осталось $k\ge 1$ вершин (и, соответственно, $k-1$ ребро)
	Тогда изначально было $k+2t$ вершин, $k-1+3t$ рёбер и $t$ циклов.
	Количество рёбер в исходном графе больше числа вершин в нём же ровно на $t-1$.

	Стало быть, если фиксировано число вершин в исходном кактусе ($n=k+2t$), но сами
	числа $k$ и $t$ произвольны, то для максимизации числа рёбер выгодно взять
	$t=\lfloor \frac{n-1}{2} \rfloor$ и $k=n-2t$.
	То есть если в кактусе $n$ вершин, то в нём не более чем вот столько рёбер:
	\[
		k - 1 + 3t = n - 2t - 1 + 3t =
		n - 1 - \left\lfloor \frac{n-1}{2} \right\rfloor =
		\left\lfloor \frac{3n-3}{2} \right\rfloor =
	\]
	\begin{Rem}
		На занятии была оценка $\lceil \frac{3n-1}{2} \rceil$, кажется, она неверна
		уже при $n=3$.
	\end{Rem}
	
	Теперь приводим пример: граф-ромашка (несколько треугольников с общей вершиной),
	иногда добавляем дополнительное ребро (чтобы сошлась чётность вершин).
	Более строго:
	\begin{itemize}
		\item
			Если $n=2x+1$, то мы нарисуем граф с $3x$ рёбрами, оценка достигнется:
			\[ \frac{3n-3}{2} = \frac{6x+3-3}{2} = 3x \]
			\TODO картинка
		\item
			Если $n=2x+2$, то мы нарисуем граф с $3x+1$ рёбром, оценка достигнется:
			\[ \left\lfloor\frac{3n-3}{2}\right\rfloor = \left\lfloor\frac{6x+6-3}{2}\right\rfloor = 3x+1 \]
			\TODO картинка
	\end{itemize}

\subsection{Задача 2.3}
	Очевидно, что $\kappa(D) \ge \kappa(D - e)$.
	Покажем, что $\kappa(D - e) + 1 \ge \kappa(D)$.
	В самом деле: пусть есть некоторое множество вершин $S$, разделяющее $D-e$.
	Давайте удалим $S$ из $D$, если развалились на компоненты сильной связности, то успех.
	Если не успех, то получаем, что ребро $e$ соединяло те две компоненты сильной связности,
	на которые разваливается $D-S$.
	Если одна из компонент имеет размер больше единицы, то можно удалить вершину, инцидентную $e$.
	Иначе граф выглядит так: $|S|=n-2$ и ребро $a \to b$.
	\TODO
