\chapter{Занятие 08.04.2016}
\section{Разбор задач}

\problem{37}
	Разбирал Игорь Лабутин.

	У нас есть автомат для языка $A$ и автомат для языка $B$.
	Мы умеем строить автомат для развёрнутого языка $REVERSE(B) = \{ w^R \mid w \in B \}$.
	Давайте построим следующие переходы: $Q_{p_i,q_i} \to c_i\, Q_{p_i', q_i'}\,d_i$,
	тут считаем, что в автомате для $A$ был переход из $p_i$ по $c_i$ в $p_i'$,
	а в автомате для $REVERSE(B)$ был переход из $q_i$ по $d_i$ в $q_i'$.
	Мы так пишем слово с двух концов "--- с начала слово из $A$, с конца слово из $REVERSE(B)$
	(причём в обратном порядке), т.е. на самом деле получим $AB$, что и требовалось. 

\problem{38}
	\TODO
	\subsection{От Игоря (неверное)}
		Разбирал Игорь Лабутин и завалился.

		Попробовали получить противоречие через лемму о накачке для слова $\t{a}^n\t{b}^n\t{a}^n$,
		тут возникла проблема.

	\subsection{От Оли}
		Разбирала Оля Черникова.

		Лемма о накачке, слово такое:
		\[ \t{b}^{4n}\t{a}^{2n}\t{b}^{2n}\t{b}^{4n} \]
		Случаи:
		\begin{enumerate}
			\item
				Обе части для накачки попали в последнюю половину "--- $\t{b}^{6n}$.
				Знаем, что $|u|+|v|\vdots 3$.
				При накачке с $i=2$ в левую треть добавится \t{a}, а в правую треть \t{a} добавится не может, упс.
			\item
				Обе части для накачки попали в центральный кусок из $\t{a}^{2n}\t{b}^{2n}$.
				Опять накачаем с $i=2$ в левую треть добавится \t{a}, а в правую они добавится не могут.
			\item
				Обе части для накачки попали в левый кусок из $\t{b}^{4n}\t{a}^{2n}$,
				причём $\t{a} \in uv$.
				Пусть $|uv|=3k$.
				\begin{enumerate}
					\item
						Если в $uv$ есть $<k$ букв \t{b}, то в левой трети появится немного \t{a}, а в правой "--- не появится.
					\item
						Если в $uv$ есть $>k$ букв \t{b}, то удалим $uv$, длина слова уменьшится, слева появится \t{a}.
					\item
						Пусть в $uv$ есть ровно $k$ букв \t{b}.
						Если в $u$ лежат только \t{b}, то см. случай следующий.
						\TODO
				\end{enumerate}
			\item
				Если обе части попали в $\t{b}^{4n}$, то мы можем взять $i\approx\infty$,
				в левом слове будут только \t{b}, а в правое когда-нибудь войдёт \t{a}.
		\end{enumerate}

\problem{39}
	Разбирал Игорь Лабутин.

	Возьмём следующую грамматику:
	\[ S \to \t{1} \mid \Sigma\,S\,\Sigma \mid \Sigma\,\Sigma\,S\,\Sigma \mid \Sigma\,S\,\Sigma\,\Sigma \]
	Инвариант: в каждый момент времени $S$ будет в средней трети (в том смысле, что в условии).
	Но у нас возникают проблемы уже на первых же шагах:
	\begin{enumerate}
		\item $S \to \t{1}$, а \t{1} в языке не лежит (так как $|x|=|z|=0$, $|y|=1$)
		\item $S \to \t{00}S\t{0} \to \t{0010}$, а это слово в языке не лежит (так как $|x|=|z|=1$, $|y|=2$)
	\end{enumerate}

	Попытка починить:
	\[ S \to \Sigma\,\t{1}\,\Sigma \mid \Sigma\,S\,\Sigma \mid \Sigma\^2,S\,\Sigma^3 \mid \Sigma^3\,S\,\Sigma^2 \]
	Дима Розплохас отвечает: <<\t{000100}!>>.
	Упс, эту строчку пока получить не можем.

	Новая стратегия: давайте запишем все короткие строчки из языка явно, а дальше покажем, что
	рекурсивными переходами можно добить.
	
	Ответ такой:
	\[ S \to \Sigma\,\t{1}\,\Sigma \mid \Sigma^2\,\t{1}\,\Sigma^3 \mid \Sigma^3\,\t{1}\,\Sigma^2 \mid \Sigma\,S\,\Sigma \mid \Sigma^2\,S\,\Sigma^3 \mid \Sigma^3\,S\,\Sigma^2 \]
	Почему всё из грамматики лежит в языке? Потому что инвариант, а при переходе надо посмотреть, как меняются границы слов $xyz$ явно "--- центр расширяется, одно (или два?) из крайних тоже.

	В обратную сторону: если единичка строго в центре, откусим с двух сторон символ.
	Если левее центра "--- откусим слева два, справа три (и наоборот).
	Например, пусть у нас слово вида $\Sigma^l\Sigma^k\Sigma^l$, причём единичка стоит в центральной трети и левее центра.
	Тогда $k$ нечётно и:
	\begin{gather*}
		2l+k=n \\
		l \ge k \\
		l+1 \le x \le l+\frac{k}{2}
	\end{gather*}
	Тогда после съедания $x$ перейдёт в $x-2$.
	Скажем, что тогда $l \to l - 2$, $k \to k - 1$, проверим неравенства.
