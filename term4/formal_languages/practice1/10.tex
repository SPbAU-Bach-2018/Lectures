\chapter{Занятие 22.04.2016}
\setauthor{Егор Суворов}

\problem{30}
	Разбирал Дима Розплохас.

	Пусть была грамматика в нормальной форме Хомского для языка $L$.
	Завайте оставим все её правила и допишем следующие:
	\begin{itemize}
		\item
			Для правила $A \to B\,C$ добавляем:
			\begin{gather*}
				B' \to C\, A' \\
				C' \to A'\, B
			\end{gather*}
		\item
			$S' \to \epsilon$
		\item
			$\hat S \to S$
		\item
			Для каждого правила $X \to c$ добавляем $\hat S \to X'\, c$
		\item
			$\bar S$ становится начальным состоянием
	\end{itemize}
	Дальше что-то доказал.

	Доказательство от семинариста: возьмём строку из $L$.
	Посмотрим на дерево разбора.
	Потом идём из какого-то терминала снизу вверх.
	Состояние (штрихованый нетерминал) "--- вершина дерева.
	Идём налево "--- дописываем второй терминал направо.
	Идём направо "--- дописываем слева.

\problem{28}
	Разбирала Лиза Третьякова.

	Мы построим МП-автомат, который принимает язык по пустому стеку и множеству терминальных состояний (\TODO рассказать про трюк).
	Раз язык $L$ регулярный, то у нас для него есть автомат.
	Состояния будут такие же, каждый переход разбиваем на два.
	Если пошли по правильной букве, то стек не меняем.
	Если по неправильной "--- кладём либо \t{+} (если получили \t{a}),
	либо \t{-} (если получили \t{b}).
	Строчки \t{+-} и \t{-+} мы сокращем, таким образом на стеке хранится текущий баланс между буквами.
	Недетерминизм автомата нужен затем, чтобы он в точности повторил путь в исходном автомате (с точностью
	до того, какое ребро из пары переходов выбирается из-за буквы в слове из $PERMUTE$).

\problem{43}
	Разбирал Егор Суворов.

	\TODO лучше рассказывать через дерево разбора (оно же путь разбора).

\problem{44}[от Лизы]\label{prob44}
	Разбирала Лиза Третьякова.

	Воспользуемся леммой о накачке, нам дали число $n$, рассмотрим слово:
	\[
		\t{(}^n \t{)}^n \t{(}^n \t{)}^n
	\]
	Лемма о накачке нашла нам две подстроки возле краёв "--- $u$ и $v$.
	$u$ должна состоять только из \t{(}, а $v$ должна состоять только из \t{)}.
	Давайте их удалим.
	Если $u \ne \epsilon$, то получим слово $\t{(}^{n-|u|}\t{)}^n\dots$, оно не лежит в языке Дика.
	Если $v \ne \epsilon$, то получим слово $\dots\t{(}^n\t{)}^{n-|v|}$, оно не лежит в языке Дика.

\problem{44}[от Егора]\label{prob44_egor}
	Разбирал Егор Суворов.

	Каждый нетерминал должен порождать строки фиксированного баланса.
	Построим строку $\t{(}^n\t{)}^n[\t{()}]^{n}$, посмотрим, как мы её построили с концов, баланс расходится сколь угодно далеко,
	противоречие с конечностью нетерминалов.

\problem{46}
	Разбирал Сева Степанов.

	Переходы:
	\begin{enumerate}
		\item
			$S\to S$ по букве $x$, кладёт букву $x$ на стек
		\item
			$S\to S'$ по $\epsilon$, стек не меняем (это мы начинаем читать $v$ вместо $u$)
		\item
			$S' \to S'$ по букве $x$, снимаем со стека букву
		\item
			$S' \to S''$ по единице, снимаем со стека букву
		\item
			$S'' \to S''$ по букве $x$, снимаем со стека букву.
	\end{enumerate}
	Требуем, чтобы автомат принимал по пустому стеку и заканчивал работу в $S''$.

	\begin{Rem}
		Можно промежуточную вершину убрать, и перекинуть часть $v$ до единички в $u$.
	\end{Rem}

\problem{45}
	Разбирал Егор Суворов.

	Берём языки:
	\[
		A \coloneq \t{(}^n\t{)}^n \\
		B \coloneq \t{[}^n\t{]}^n
	\]
	Их конкатенация не соответствует лемме о накачке для линейных грамматик.

\problem{47}
	Разбирал Дима Розплохас.

	\begin{Rem}
		Можно решить через задачу 48 и задачу ???: этот язык не имеет однозначной грамматики $\Ra$ не может приниматься линейной грамматикой.
	\end{Rem}
	Пусть есть детерминированный МП-автомат $A$.
	Возьмём его и его копию $A'$.

	Удалим из $A$ все рёбра по букве \t{c}.
	Возьмём терминальное состояние $t$, мы в него пришли по строке $\t{a}^n\t{b}^n$.
	Потом допишем одну \t{b}, попали в нетерминальное состояние $q$, из которого всё еще можно попасть в терминальное (через буквы \t{c}).
	Давайте мы из $t$ добавим $\epsilon$-переход, который делает то же самое, что и переход $t \to q$, в копию состояния $q$ в автомате $A'$.
	Удалим из $A'$ все рёбра по символам \t{a}, \t{b} (оставим только $\epsilon$ и \t{c}).
	Стартовое состояние возьмём из $A$, терминальные "--- это терминальные $A'$.
	Получили недетерминированный МП-автомат, который принимает язык $\t{a}^n\t{b}^n\t{c}^{n+1}$.
	
	Надо еще чуть аккуратнее, когда из $t$ нет перехода по \t{b} сразу, но есть цепочка однозначных $\epsilon$-переходов (которые просто стек модифицируют).

	Противоречие: этот язык не контекстно-свободный по лемме о накачке.

	А где мы пользуемся детерминированностью?
	В том месте, где мы говорим, что есть переход по \t{b} (это я не понял)
	и в том месте, где мы говорим, что никаких других слов, кроме $\t{a}^n\t{b}^n\t{c}^{n+1}$ новый автомат не примет.
