\section{Сведения}
\begin{Def}
Сведение по Карпу: $L_1  \to L_2$, если 
имеется полиномиально вычислимая f:
$\forall x x \in L_1 \Lra f(x) \in L_2$
\end{Def}

Мы не можем поменять местами ответ, то есть мы не можем сказать,
что там где нет мы скажем да, а там где да сажем нет. Это важно. 
Так как есть подсказка для второго языка, то эта же 
подсказка для первго языка, а подсказки у нас для "да".

\begin{Def}
Сведение задач по Левину: $R_1 \to R_2$, если $\exists f, g, h \forall x_1, y_1, y_2:$
\begin{enumerate}
    \item $R_1(x_1, y_1) \Ra R_2(f(x_1), g(x_1, y_1))$
    \item $R_1(x_1, h(f(x_1), y_2)) \La R_2(f(x_1), y_2)$
    \item $f$ и $h$ полиномиально вычислимы, а $g$ ограничена полиномом. 
\end{enumerate}
\end{Def}

Функцию $g$ мы не собираемся запускать, но нам важно, что бы решение для второго случая 
было полиномиально ограницено, если полиномиально ограничено в первом случае.  
\begin{Def}
Задача A "--- трудная для класса C, $\forall B \in C \colon B \to A$.
\end{Def}
\begin{Def}
Задача полная для класса C, если она трудная и принадлижит C.
\end{Def}
\begin{theorem}
Если $A$ "--- NP-трудная, ;
\end{theorem}


\begin{exmp}
Задача об ограниченной остановке:
$\tilde{BH}(<M, x, 1^t>, w) =$ НМТ
M с подсказкой w принимет вход $x$ за $\le t$ шагов.
\end{exmp}
\begin{theorem}
Задача об ограниченной остановке "--- $\tilde{NP}$-полная, 
а соответствующей язык "--- NP-полный. 
\end{theorem}
\begin{Rem}
Принадлежность $\tilde{NP}$ использует 
существование универсальной ДМТ, которая 
может промоделировать вычисление ДМТ, описание
которой дано ей на входе. Причем лишь с полиномиальным замедлением. 
\end{Rem}
\begin{proof}
Есть фиксированная задача, то есть 
машины Тьюринга $M$, которая работает $p(n)$

$f(x) = (M, x, 1^{p(|x|)})$

Давай-те убедимся, что это правильное сведение. Если 
у x существовала подсказка $w$, то и у новой машины
эта же подсказка подходит и наоброт. 
\end{proof}

\section{Булева схема}
\begin{Def}
Булева схема:
\begin{enumerate}
\item Ориентированный граф без циков.
\item Бинарные (и унарные) операции над битами: $\wedge, \vee, \oplus$
\end{enumerate} 
\end{Def}
\begin{exmp}

\end{exmp}

$CIRCUIT_SAT = \{(C, x)|C \text{"--- схема}, С(x) = 1\}$\\
Хотим доказать, что эта задача $NP$ полная, для 
этого сведем уже известную нам задачу из $NP$ к 
нашей.              \\
$BH \to CIRCUIT_SAT:$
\begin{enumerate}
\item этаж схемы "--- конфигурация ДМТ\\
\item время t $\Ra$ t больших этажей схемы
\item время $t \Ra t$ ячеек на этаже\\
\item переход между этажами реализует один шаг ДМТ
\item вход схема "--- подсказка НМТ(вход НМТ уже подставлен).
\end{enumerate}

\begin{Def}
Конфигурация машины тьюринга это все, что 
определяет ее дальнейшую судьбу, где располагается головка, 
память, переходы. 
\end{Def}

Память не больше времени, которое она будет работать. Вход 
нам дан. Поэтому сделаем ленту конечной,обрежим по времени работы. 

Теперь нам нужно сдеать шаг. 
Задача $\exists ? w M(x, w) = 1$ за $\le t$ шагов. 

$x$ мы знаем, его мы засуним в схему. А вот $w$ это вход и интересно,
существует ли этот самый вход. 

Научимся программировать при помоши схем 
if x then y else z

(x and y)  |  (not x and z)

Для ячейки хотим вычислить, что там будет. Если головка h далеко
if ($h_i$) then что-то содержательное
else $a_i$

Что-то содержательное, то это опять много if. Смотрим, где что. Но 
в любом случае, это константа. 
На новом шаге положение головки это $h_i'$.

Если сделать так, то получится $t^2$ гейтов. На каждом этаже $t$ и 
количество этажей $t$.

Этого достаточно, что бы доказать, что это $NP$"--- полная задача. 

А теперь, мы будем получать удовольствее сводя одну к другой быстрее.

Если мы наперед будем знать, где находится головка, то мы сможем рисовать
только гейты в окрестности головки.

Тогда нам будет достаточно $O(t)$ гейтов, квадрат нам уже не нужен. 
Время работы мы хотим испортить только на log.  То есть,
мы хотим чуть-чуть изменить машину тьюринга в ablivios, то 
есть в ту, в которой положение головки не зависит от входа,
а зависит только от его длины. 

ablivios машина тьюрига(пофигистическая)

Теперь, как мы это будем строить. 
Мы хотим добиться, что бы головка стояла на месте, а ленты как-то двигались. 

Научимся двигать одну ленту, а дальше все и так получится. 

Как и в прошлый раз разбили на блоки и хотим что бы суммарно в них заполнены были половина из 
возможных. 

Если у нас есть $2^i$ элементов в i-ом блоке,то мы можем все это раскидать в начало. 
То есть после преобразования у всех элементов будет заполнено ровно половину. Назовем это
балансировкой и занимает это по времени $2^i$, но такая балансировка происходит 
не чаще, чем $2^i$ шагов. 

Значит всего время работы $O(\sum_{i = 0}^{\log t}2^i \frac{t}{2^i}) = O(t\log t)$

Теперь улучшим машину, что бы она стала ablivios. Теперь будем проводить 
балансировку не глядя, что там происходит. 

\begin{lemma}
Существует U "--- ablivious TM, U(M, x, $1^t$) = M(x) за t шагов и 
делает при этом $O(t\log t)$ шагов. 
\end{lemma}
\begin{conseq}
...
\end{conseq}


\section{3-SAT}
$\tilde{3-SAT} = \{(F, A)|F \text{--- в 3-КНФ}, F(A) = 1\}$
 
\begin{enumerate}
 \item по переменно на каждый гейт. 
 \item гейт $g(x, y) \to$ клозы, выражающие $g = g(x, y)$, 
 например ($g = \oplus$)
 
 Мы можем записать гейт не более восьми дизъюнктов. 
 \item 
 Теперь давай-те напишем конъюкцию всех этих дизъюнктов. 
 \item 
 Хотим добавить еще конъюнкт, что на выходе получилась единица. 
\end{enumerate}

Это наиболее изестная $NP$-полная задача. 

Сейчас у нас есть два вопроса $NP ?= P$ и $\tilde P ?= \tilde{NP}$.
\section{Оракульная машина тьюринга}
Оракульная машина тьюринга имеет доступ к оракулу, который за один шаг
дает ответ на вопрос. 

Формально: состояния $q_{in}$, $q_{out}$  и "фантастический переход" из 
$q_{in}$ в $q_{out}$,заменяющий содержимое третий ленты на ответ оракула. 

$M^B$ "--- оракульная машина M, котрый дали конкртетный оракул B. Класс NP может 
быть не замкнут относительно этих операций. 